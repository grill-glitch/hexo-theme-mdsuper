<%
// 计算顶部卡片的 style：若配置了 theme.background（非空字符串），使用背景图；否则使用原有的背景色
var bgStyle = (theme && theme.background && String(theme.background).trim())
  ? ("background-image: url('" + theme.background + "'); background-size: cover; background-position: center;")
  : "background-color: rgb(var(--mdui-color-primary-container));";
%>

<mdui-card variant="fill" style="width: 100%; <%= bgStyle %> padding: 8px;">
    <div class="mdui-prose post" style="text-align: center;">
        <% if (theme && theme.display_index_top && theme.display_index_top.avatar) { %>
            <mdui-avatar fit="contain" src="<%= theme.display_index_top.avatar %>" style="width: 128px;height: 128px;"></mdui-avatar>
        <% } %>
        <h1><%- markdown(config.title) %></h1>
        <h3><%- markdown(config.subtitle) %></h3>
        <%- markdown(theme.display_index_top && theme.display_index_top.text ? theme.display_index_top.text : "") %>
    </div>
</mdui-card>
<br>
<% page.posts.each(function (post) { %>
    <%- partial('_partial/post-short', { post: post }) %>
    <br>
<% }) %>
<%- partial('_partial/paginator') %>